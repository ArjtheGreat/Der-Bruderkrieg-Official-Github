d_austria_loses_peace_deal = {
    austria_loses_peace_deal = yes
}
austria_loses_peace_deal = {
   
    log = "austria post war peace deal"
    if = {
        limit = { 
            country_exists = AUS
        }
        AUS = {
            dismantle_faction = yes 
            load_focus_tree = generic_focus
        }
        AUS = {country_event = wiltkrieg.2}
        GER = {country_event = wiltkrieg.3}
        news_event = {id = wiltkrieg.4 days = 2}

        GER = {
            transfer_state = 66
        }

        set_global_flag = prussia_has_beaten_austria

        prussia_wins_states = yes

        

    }
}
d_prussia_russia_wins_states = {
    prussia_russia_wins_states = yes
}
prussia_russia_wins_states = {
    log = "prussia_russia_win_styates"
    hidden_effect = {
        if = {
            limit = { DRV = { is_in_faction_with = AUS } }
            ITA = {
                annex_country = {
                    target = DRV
                }
            }
        }
    }
     if = {
        limit = {
            JAP = {
                is_in_faction_with = AUS
            }
        }
        JAP = {
            set_faction_leader = yes
        }
    }
    else_if = {
        limit = {
            TUR = {
                is_in_faction_with = AUS
            }
        }
        TUR = {
            set_faction_leader = yes
        }
    }
    else = {
        random_country = {
            limit = {
                NOT = {
                    tag = DRV
                }
                is_in_faction_with = AUS
            }
            save_global_event_target_as = new_pakt_faction_leader
        }
        event_target:new_pakt_faction_leader = {
            set_faction_leader = yes
        }
    }
    AUS = {
        leave_faction = yes
    }
    SOV = {
        white_peace = AUS
    }
    GER = {
        white_peace = AUS
    }
    set_global_flag = austria_defeated
    AUS = {country_event = wiltkrieg.2}
    GER = {country_event = wiltkrieg.3}
    news_event = {id = wiltkrieg.4 days = 2}
   

    GER = {
        transfer_state = 66
        transfer_state = 67
    }
    

    set_global_flag = prussia_has_beaten_austria
    set_global_flag = prussia_has_beaten_austria_with_russian_support
    GER = {
        annex_country =  { target = GPU transfer_troops = no }
        annex_country =  { target = WUR transfer_troops = no }
        annex_country =  { target = HES transfer_troops = no }
        annex_country =  { target = BAD transfer_troops = no }
        annex_country =  { target = NAS transfer_troops = no }
    }
    GER = {
       transfer_state = 69
       transfer_state = 9
       transfer_state = 958
       transfer_state = 75
       transfer_state = 74
       transfer_state = 67
       transfer_state = 762
       transfer_state = 153
       transfer_state = 822
       transfer_state = 152
       transfer_state = 4
       transfer_state = 820
       transfer_state = 102
       transfer_state = 72
       transfer_state = 777
       transfer_state = 39
    }

    GER = { add_state_core = 69 }
    GER = { add_state_core =  9}
    GER = { add_state_core =  958}
    GER = { add_state_core =  75}
    GER = { add_state_core =  74}
    GER = { add_state_core =  67}
    GER = { add_state_core =  762}
    GER = { add_state_core =  153}
    GER = { add_state_core =  822}
    GER = { add_state_core =  152}
    GER = { add_state_core =  4}
    GER = { add_state_core =  820}
    GER = { add_state_core =  102}
    GER = { add_state_core =  72}

    SOV = {
        transfer_state = 951
        transfer_state = 88
        transfer_state = 89
        transfer_state = 1123
        add_state_core = 951
        add_state_core = 88
        add_state_core = 89
        add_state_core = 1123
    }
    if = {
        limit = {
            OR = {
                has_global_flag = weltkrieg_SOV_gets_balkans
                NOT = { has_global_flag = weltkrieg_ITA_gets_balkans }
            }
        }
        HUN = {
            transfer_state = 154
            transfer_state = 155
            transfer_state = 43
            transfer_state = 664
            
            transfer_state = 804
            transfer_state = 73

            if = {
                limit = {
                    SOV = {
                        has_country_leader = {
                            name = "Vladimir Lenin"
                            ruling_only = yes
                        }
                    }
                }
                HUN = {
                    set_popularities = {
                        communism = 65
                        fascism = 22
                        ultranationalism = 10
                        democratic = 3
                    }
                    set_politics = {
                        ruling_party = communism
                    }
                }
                
            }
            else = {
                HUN = {
                    set_popularities = {
                        democratic = 24
                        democratic_liberalism = 36
                        communism = 2
                        fascism = 32
                        ultranationalism = 6
                    }
                    create_country_leader = {
                        name = "Istvan Bethlen"
                        desc = ""
                        picture = "Istvan_Bethlen.dds"
                        expire = "1965.1.1"
                        ideology = democratic_liberal
                        traits = {
                            
                        }
                    }
                    set_politics = {
                        ruling_party = democratic_liberalism
                    }
                }
            }
            HUN = {
                keep_current_politics = yes
            }
            
        }
        SOV = {
            puppet = HUN
        }
        HUN = {
            reset_government = yes
        }
    }
    if = {
        limit = {
            has_global_flag = weltkrieg_ITA_gets_balkans
        }
        HUN = {
            transfer_state = 154
            transfer_state = 155
            transfer_state = 43
            transfer_state = 664
            transfer_state = 804
            transfer_state = 73
            transfer_state = 45
            transfer_state = 764
            set_politics = {
                ruling_party = fascism
                elections_allowed = no
            }
            set_popularities = {
                democratic = 10
                democratic_liberalism = 10
                communism = 8
                fascism = 52
                ultranationalism = 20
            }
            keep_current_politics = yes
        }
        ITA = {
            puppet = HUN
        }
        HUN = {
            reset_government = yes
        }
    }
    italian_states = yes
    croat_states = yes
    if = {
        limit = {
            YUG = {
                is_in_faction_with = SOV
            }
        }
        serbia_states = yes
    }
    else = {
        if = {
            limit = {
                OR = {
                    has_global_flag = weltkrieg_SOV_gets_balkans
                    NOT = { has_global_flag = weltkrieg_ITA_gets_balkans }
                }
            }
            SOV = { puppet = BOS }
            else = {
                ITA = { puppet = BOS }
            }
        }
        HUN = {
            transfer_state = 764
            transfer_state = 45
            transfer_state = 809
            transfer_state = 812
        }
    }
    
    SLO = {
        transfer_state = 70
        transfer_state = 71

        if = {
            limit = {
                SOV = {
                    has_country_leader = {
                        name = "Vladimir Lenin"
                        ruling_only = yes
                    }
                }
            }
                set_popularities = {
                    democratic_communism = 54
                    fascism = 19
                    ultranationalism = 5
                    democratic = 19
                    democratic_liberalism = 3
                }
                set_politics = {
                    ruling_party = democratic_communism
                }
                keep_current_politics = yes
        }
        else = {
            SLO = {
                set_popularities = {
                    democratic = 34
                    democratic_liberalism = 26
                    communism = 14
                    fascism = 20
                    ultranationalism = 6
                }
                set_politics = {
                    ruling_party = democratic
                }
                keep_current_politics = yes
            }
        }
    }
    SOV = {
        puppet = SLO
    }
    SLO = {
        reset_government = yes
    }
    romanian_states = yes
    GER = {
        if = {
            limit = { country_exists = AUS }
            annex_country = {
                target = AUS
            }
        }
    }
    ITA = {
        if = {
            limit = { country_exists = ORA }
            annex_country = {
                target = ORA
            }
        }
        if = {
            limit = { country_exists = KEN }
            annex_country = {
                target = KEN
            }
        }
        if = {
            limit = { country_exists = TZN }
            annex_country = {
                target = TZN
            }
        }
    }
}
prussia_wins_states = {
    set_global_flag = austria_defeated
    if = {
        limit = {
            country_exists = GPU
            GPU = {
                has_war_with = GER
            }
            
        }

        GER = {
            annex_country =  { target = GPU transfer_troops = no }
            annex_country =  { target = WUR transfer_troops = no }
            annex_country =  { target = HES transfer_troops = no }
            annex_country =  { target = BAD transfer_troops = no }
            annex_country =  { target = NAS transfer_troops = no }
        }
    }
    GER = {
       transfer_state = 69
       transfer_state = 9
       transfer_state = 958
       transfer_state = 75
       transfer_state = 74
       transfer_state = 67
       transfer_state = 762
       transfer_state = 153
       transfer_state = 822
       transfer_state = 152
       transfer_state = 4
       transfer_state = 820
       transfer_state = 102
       transfer_state = 777
        if = {
            limit = {
                has_global_flag = weltkrieg_ITA_gets_balkans
            }
            HUN = {
                transfer_state = 39
            }
            else = {
                transfer_state = 39
            }
        }
    }

    GER = { add_state_core = 69 }
       #GER = { add_state_core =  9}
       #GER = { add_state_core =  958}
      # GER = { add_state_core =  75}
       #GER = { add_state_core =  74}
       GER = { add_state_core =  67}
       GER = { add_state_core =  762}
       GER = { add_state_core =  153}
      # GER = { add_state_core =  822}
       #GER = { add_state_core =  152}
       #GER = { add_state_core =  4}
       #GER = { add_state_core =  820}
      # GER = { add_state_core =  102}

    hungary_states = yes 
    italian_states = yes
    croat_states = yes
    serbia_states = yes
    slovak_states = yes
    polish_states = yes
    #ukrainian_states = yes
    romanian_states = yes
}

hungary_states = {

    HUN = {
        drop_cosmetic_tag = yes
        transfer_state = 154
        transfer_state = 155
        transfer_state = 43
        transfer_state = 664
        transfer_state = 804
        transfer_state = 73

        set_popularities = {
            ultranationalism = 54
            communism = 12
            fascism = 20
            democratic = 14
        }
        keep_current_politics = yes
    }
    if = {
        limit = {
            has_global_flag = weltkrieg_ITA_gets_balkans
        }
        HUN = {
            transfer_state = 73
            transfer_state = 45
            transfer_state = 764
            set_politics = {
                ruling_party = fascism
                elections_allowed = no
            }
            set_popularities = {
                democratic = 10
                democratic_liberalism = 10
                communism = 8
                fascism = 52
                ultranationalism = 20
            }
            keep_current_politics = yes
        }
        ITA = {
            puppet = HUN
        }
        HUN = {
            reset_government = yes
        }
        ITA = {
            puppet = HUN
        }
        HUN = {
            reset_government = yes
            set_politics = {
                ruling_party = ultranationalism
            }
        }
        else = {
            GER = {
                puppet = HUN
            }
            HUN = {
                set_cosmetic_tag = prussian_rk
                reset_government = yes
                set_politics = {
                    ruling_party = ultranationalism
                }
            }
        }
    }
}

polish_states = {

    GLC = {
        transfer_state = 72
        transfer_state = 88
        transfer_state = 951
        transfer_state = 89
        transfer_state = 1123
        set_cosmetic_tag = prussian_rk
        set_popularities = {
            fascism = 44
            communism = 12
            ultranationalism = 10
            democratic = 14
            neutrality = 20
        }
        keep_current_politics = yes
    }

    GER = {
        puppet = GLC
    }
    GLC = {
        reset_government = yes
        set_politics = {
            ruling_party = fascism
        }
    }
    
}


italian_states = {
    ITA = {
        transfer_state = 159
        transfer_state = 160
        transfer_state = 805
        transfer_state = 736
        transfer_state = 810
        transfer_state = 163
        transfer_state = 1042
    }
    
    AUS = {
    white_peace = ITA
    }

    if = {
        limit = {
            ALB = {
                is_in_faction_with = AUS
            }
        }
        ITA = {
            annex_country = {
                target = ALB
                transfer_troops = no
            }
        }
    }
}

croat_states = {
    
    CRO = {
        transfer_state = 109
        transfer_state = 103
        transfer_state = 823
        transfer_state = 812
        transfer_state = 816
        transfer_state = 815
        transfer_state = 104
        transfer_state = 819
        transfer_state = 809

        set_popularities = {
            fascism = 66
            communism = 29
            socialism_democratic = 5
        }
        keep_current_politics = yes
    } 

    ITA = {
        puppet = CRO
    }
    CRO = {
        reset_government = yes
        set_politics = {
            ruling_party = fascism
        }
    }

    
}

serbia_states = {
    if = {
        limit = {
            YUG = {
                exists = yes
            }
        }
        YUG = {
            transfer_state = 809
            transfer_state = 45
            transfer_state = 764
        }
    }
    else_if = {
        limit = {
            SER = {
                exists = yes
            }
        }
        SER = {
            transfer_state = 809
            transfer_state = 45
            transfer_state = 764
        }
    }
    else = {
        CRO = {
            transfer_state = 809
            transfer_state = 45
            transfer_state = 764
        }
    }
}

slovak_states = {
   
    SLO = {
        transfer_state = 70
        transfer_state = 71
        set_cosmetic_tag = prussian_rk
        set_popularities = {
            fascism = 42
            communism = 20
            ultranationalism = 12
            democratic = 14
            socialism_democratic = 12
        }
        keep_current_politics = yes
    }
    GER = {
        puppet = SLO
    }
    SLO = {
        set_politics = {
            ruling_party = fascism
        }
        reset_government = yes
    }
}

romanian_states = {
    ROM = {
        transfer_state = 82
        transfer_state = 83
        transfer_state = 952
        transfer_state = 84
        transfer_state = 76
        transfer_state = 953
        transfer_state = 80
    }
}

austrian_civil_war_effect = {
    AUS = {
        declare_war_on = {
            target = CZE
            type = annex_everything
        }
        declare_war_on = {
            target = HUN
            type = annex_everything
        }
        declare_war_on = {
            target = GLC
            type = annex_everything
        }
        
        
    }

    HUN = {
        declare_war_on = {
            target = GLC 
            type = annex_everything 
        }
        declare_war_on = {
            target = CZE
            type = annex_everything
        }
        declare_war_on = {
            target = ITF 
            type = annex_everything
        }
        declare_war_on = {
            target = CRO
            type = annex_everything
        }
    }
    GLC = {
        declare_war_on = {
            target = CZE
            type = annex_everything
        }
        
        declare_war_on = {
            target = CRO
            type = annex_everything
        }
    }
    CZE = {
        
        declare_war_on = {
            target = CRO
            type = annex_everything
        }
        
    }
    ITF ={
        declare_war_on = {
            target = CRO
            type = annex_everything
        }
    }
}



prussia_loses_peace_deal = {
       AUS = { country_event = second_treaty_of_vienna.1 }
       if = {
           limit = {
               ITA = {
                   is_in_faction_with = GER
               }
           }
           ITA = { 
                set_faction_leader = yes
            }
       }
       else = {
           random_country = {
               limit = {
                   is_in_faction_with = GER
                   NOT = {
                       tag = GER
                   }
               }
               set_faction_leader = yes
           }
       }
       GER = {
           leave_faction = yes
            white_peace = AUS
       }
       
}           
d_italy_loses_to_austria_peace_deal = {
    italy_loses_to_austria_peace_deal = yes
}
italy_loses_to_austria_peace_deal = {
    ITA = {
        white_peace = AUS
        leave_faction = yes
    }
    if = {
        limit = {
            ITF = {
                exists = yes
            }
        }
        ITF = {
            transfer_state = 159
            set_cosmetic_tag = kingdom_of_lombardy_veneto
        }
    }
    else = {
        AUS = {
            transfer_state = 159
        }
    }
    if = {
        limit = {
            FRA = {
                has_war_with = ITA
            }
        }
        ITA = {
            white_peace = FRA
        }
        FRA = {
            transfer_state = 158
            transfer_state = 157
            transfer_state = 891
        }
    }
    else = {
        ITF = {
            add_state_core = 158
            add_state_core = 157
            add_state_core = 891
            transfer_state = 158
            transfer_state = 157
            transfer_state = 891
            #drop_cosmetic_tag = yes
            set_cosmetic_tag = kingdom_of_north_italy
		if = { 
			limit = { NOT = { is_in_faction_with = AUS } }
			AUS = { add_to_faction = ITF }
		}
        }
    }
    
    SCI = {
        add_state_core = 882
        add_state_core = 886
        add_state_core = 156
        add_state_core = 880
        add_state_core = 115
    }
    ITA = {
        set_cosmetic_tag = ITA_central_italy
        every_country = {
            limit = { has_war_with = ITA }
            white_peace = ITA
        }
        release = SCI
        set_politics = {
            ruling_party = neutrality
        }
        set_popularities = {
            communism = 8
            democratic_communism = 12
            socialism_democratic = 10
            fascism = 12
            ultranationalism = 8
            neutrality = 50
        }
        create_country_leader = {
            name = "Amadeo I"
            ideology = despotic
            picture = "gfx/leaders/Amadeo.dds"
        }
        keep_current_politics = yes
        load_focus_tree = generic_focus
    }
    SCI = {
        set_cosmetic_tag = ITA_two_sicilies
        set_politics = {
            ruling_party = neutrality
        }
        
        
        set_popularities = {
            communism = 10
            democratic_communism = 10
            socialism_democratic = 10
            neutrality = 70
        }
        keep_current_politics = yes
    }
    if = {
        limit = {
            has_global_flag = weltkrieg_FRA_gets_sicily
        }
        FRA = {
            puppet = SCI
        }
        SCI = {
            reset_government = yes
        }
        AUS = {
            puppet = ITA
        }
        ITA = {
            reset_government = yes
        }
    }
    if = {
        limit = {
            has_global_flag = weltkrieg_AUS_gets_sicily
        }
        AUS = {
            puppet = SCI
            puppet = ITA
        }
        SCI = {
            reset_government = yes
        }
        ITA = {
            reset_government = yes
        }
    }
    
}
italy_loses_to_france_peace_deal = {
    if = {
        limit = {
            AUS = {
                has_war_with = ITA
            }
        }
        italy_loses_to_austria_peace_deal = yes
    }
    else = {
        ITA = {
            white_peace = FRA
        }
        FRA = {
            transfer_state = 158
            transfer_state = 157
            transfer_state = 891
        }
        SCI = {
            add_state_core = 882
            add_state_core = 886
            add_state_core = 156
            add_state_core = 880
            add_state_core = 115
        }
        ITA = {
            set_cosmetic_tag = ITA_central_italy
            release = SCI
            load_focus_tree = generic_focus
            create_country_leader = {
                name = "Napoleon II"
                ideology = despotic
                picture = "gfx/leaders/NapoleonVIPortrait.dds"
            }
            set_popularities = {
                communism = 8
                democratic_communism = 12
                socialism_democratic = 10
                fascism = 12
                ultranationalism = 8
                neutrality = 50
            }
            keep_current_politics = yes
        }
        SCI = {
            set_cosmetic_tag = ITA_two_sicilies
            set_popularities = {
                communism = 10
                democratic_communism = 10
                socialism_democratic = 10
                neutrality = 70
            }
            keep_current_politics = yes
        }
        FRA = {
            puppet = ITA
            puppet = SCI
        }
        SCI = {
            reset_government = yes
        }
        ITA = {
            reset_government = yes
        }
    }
}

france_loses_to_austria_peace_deal = {
    FRA = {
        white_peace = AUS
    }
    if = {
        limit = {
            BEL = {
                is_in_faction_with = FRA
            }
        }
        AUS = {
            puppet = BEL
        }
    }
    if = {
        limit = {
            HOL = {
                is_in_faction_with = FRA
            }
        }
        AUS = {
            puppet = HOL
        }
    }
    if = {
        limit = {
            POR = {
                is_in_faction_with = FRA
            }
        }
        AUS = {
            puppet = POR
        }
    }
    OCC = {
        add_state_core = 23
        add_state_core = 33
        set_cosmetic_tag = OCC_anton
    }
    GPU = {
        transfer_state = 42
    }
    ADU = {
        add_state_core = 32
        add_state_core = 21
        add_state_core = 735
        set_cosmetic_tag = ADU_marseille_duchy
    }
    if = {
        limit = {
            FGD = { is_subject_of = FRA }
        }
        FGD = {
            add_state_core = 28
        }
        every_state = {
            limit = { is_core_of = FGD is_owned_by = FRA } 
            transfer_state_to = FGD
        }
    }
    FRA = {
        release = ADU
        release = LUX
        release = COR
        release = BRI
        release = OCC
        if = {
            limit = {
                country_exists = FEA
            }
            annex_country = {
                target = FEA
                transfer_troops = yes
            }
        }
        if = {
            limit = {
                country_exists = FWA
            }
            annex_country = {
                target = FWA
                transfer_troops = yes
            }
        }
        news_event = { id = france.216 days = 7 }
        set_truce = {
            target = AUS
            days = 5
        }
    }
    every_state = {
        limit = {
            is_owned_by = FRA
            is_on_continent = europe
            NOT = { state = 1 }
        }
        add_core_of = FPR
        transfer_state_to = FPR
    }
    AUS = {
        puppet = FPR
        puppet = ADU
        puppet = COR
        puppet = LUX
        puppet = BRI
        puppet = OCC
        puppet = FGD
    }
    FPR = {
        add_ideas = {
            FPR_ancien_regime
            FPR_loire_demarcation
        }
        set_cosmetic_tag = kingdom_france
        set_popularities = {
            democratic = 45
            socialism_democratic = 15
            neutrality = 20
            fascism = 10
            authoritarian_democratic = 10
        }
        set_politics = {
            ruling_party = democratic
            elections_allowed = no
        }
        create_country_leader = {
            name = "Pierre-Étienne Flandin"
            picture = "gfx/leaders/Europe/portrait_europe_generic_4.dds"
            expire = "1965.1.1"
            ideology = authoritarian_democrat 
        }
        create_country_leader = {
            name = "Pierre-Étienne Flandin"
            picture = "gfx/leaders/Europe/portrait_europe_generic_4.dds"
            expire = "1965.1.1"
            ideology = democratic_conservative 
        }
    }
    OCC = {
        add_ideas = {
            FPR_french_resistance
            FPR_loire_demarcation
        }
        if = {
                    limit = {
                        AUS = {
                            has_government = democratic
                        }
                    }
                    create_country_leader = {
                        name = "Austrian Military Government"
                        picture = "gfx/leaders/AUS/Portrait_AUS_military_government.png"
                        expire = "1965.1.1"
                        ideology = paternalistic_conservatism 
                    }
                    else_if = {
                        limit = {
                            AUS = { has_government = neutrality }
                        }
                        create_country_leader = {
                            name = "Austrian Military Government"
                            picture = "gfx/leaders/AUS/Portrait_AUS_military_government.png"
                            expire = "1965.1.1"
                            ideology = despotic 
                        }
                    }
                    else_if = {
                        limit = {
                            AUS = { has_government = democratic_liberalism }
                        }
                        create_country_leader = {
                            name = "Austrian Military Government"
                            picture = "gfx/leaders/AUS/Portrait_AUS_military_government.png"
                            expire = "1965.1.1"
                            ideology = centrism 
                        }
                    }
                    else_if = {
                        limit = {
                            AUS = { has_government = authoritarian_democratic }
                        }
                        create_country_leader = {
                            name = "Austrian Military Government"
                            picture = "gfx/leaders/AUS/Portrait_AUS_military_government.png"
                            expire = "1965.1.1"
                            ideology = authoritarian_democrat 
                        }
                    }
                }
    }
    LUX = {
        set_cosmetic_tag = LUX_AUS
    }
}



french_civil_war = {
    FPR = {
        set_state_owner = 31
        set_state_owner = 19
        set_state_owner = 806
        set_state_owner = 22
        set_state_owner = 25
        set_state_owner = 23
   
        set_state_owner = 33
        set_state_owner = 26
        set_state_owner = 20
        set_state_owner = 32
        set_state_owner = 21
        set_state_owner = 24
        set_state_owner = 16
        set_state_owner = 15
        
    }
    
    BRI = {
        set_state_owner = 14
        set_state_owner = 30
    }
    
    FRA = {
        declare_war_on = {
            target = BRI
            type = annex_everything
        }
        declare_war_on = {
            target = FPR
            type = annex_everything
        }
    }
}
d_france_loses_peace_deal = {
    france_loses_peace_deal = yes
}
france_loses_peace_deal = {
    set_global_flag = prussia_has_beaten_france
   
    if = {
        limit = { SPR = { is_in_faction_with = FRA } }
        SPR = {
            save_global_event_target_as = new_continental_system_leader
        }
        else_if = {
            limit = { POR = { is_in_faction_with = FRA } }
            POR = {
               save_global_event_target_as = new_continental_system_leader
            }
            else = {
                random_country = {
                    limit = {
                        NOT = { tag = FRA is_in_faction_with = FRA }
                    }
                    save_global_event_target_as = new_continental_system_leader
                }
            }
        }
    }
    event_target:new_continental_system_leader = {
        set_faction_leader = yes
        add_war_support = 0.2
    }
    FRA = {
        white_peace = GER
    }
    GER = {
        annex_country = {
            target = FGD
        }
      
        transfer_state = 956
        transfer_state = 28
        transfer_state = 802
        transfer_state = 42
        transfer_state = 801
        
        transfer_state = 955
        transfer_state = 8
        transfer_state = 51
        if = {
            limit = {
                BEL = { 
                    OR = {
                        AND = {
                            NOT = { is_in_faction_with = GER }
                            has_war_with = GER
                        }
                        AND = {
                            is_in_faction_with = FRA
                            has_capitulated = yes
                        }
                    }
                }
            }
            transfer_state = 800
            BEL = {
                set_popularities = {
                    fascism = 42
                    democratic = 22
                    democratic_liberalism = 10
                    communism = 12
                    socialism_democratic = 14
                }
                set_politics = {
                    ruling_party = fascism
                }
                promote_character = {
                    character = BEL_leon_degrelle_actual
                    ideology = fascism_ideology
                }
            }
            GER = {
                puppet = BEL
            }
            BEL = {
                reset_government = yes
            }
        }
        #puppet = FRA
        #if = {
        #   limit = {
        #       has_dlc = "Together for Victory"
        #   }
        #   set_autonomy = { target = FRA autonomous_state = autonomy_reichskommissariat }
        #}
        #else = {
        #   set_autonomy = { target = FRA autonomous_state = autonomy_puppet }
        #}
        
    }
    BEL = {
        if = {
            limit = {
               is_in_faction_with = GER
            }
            transfer_state = 29
            white_peace = FRA
        }
    }
    ITA = {
        if = {
            limit = {
               is_in_faction_with = GER
            }
            transfer_state = 735
            transfer_state = 1
            add_state_core = 735
            add_state_core = 1
            transfer_state = 458
            transfer_state = 665
            #transfer_state = 797
            transfer_state = 269
            #transfer_state = 268
            white_peace = FRA
        }
    }
    if = {
        limit = {
            NOT = { has_global_flag = weltkrieg_ITA_gets_occitania }
        }
        ADU = {
            add_state_core = 21
            add_state_core = 32
            set_capital = { state = 21 }
            set_cosmetic_tag = ITA_french_zone
        }
    }
    OCC = {
        if = {
            limit = {
                has_global_flag = weltkrieg_ITA_gets_occitania
            }
            #add_state_core = 33
            add_state_core = 25
            add_state_core = 31
            add_state_core = 22
            add_state_core = 26
            add_state_core = 20
            else = {
                keep_current_politics = yes
                set_cosmetic_tag = prussian_rk
                add_state_core = 33
                add_state_core = 25
                add_state_core = 31
                add_state_core = 22
                add_state_core = 26
                add_state_core = 20
                remove_state_core = 19
            }
        }
    }
    NFR = {
        keep_current_politics = yes
        set_cosmetic_tag = GER_parisian_industrial_zone
        add_ideas = RK_industrial_zone
            #add_state_core = 17
        add_state_core = 18
        add_state_core = 16
        add_state_core = 15
        add_state_core = 33
        add_state_core = 785
        add_state_core = 29
        add_state_core = 24
            #add_state_core = 27
        add_state_core = 803
    }
    WFR = {
        set_cosmetic_tag = GER_bismarckstadt
        set_capital = { state = 17 }
        add_state_core = 17
        add_state_core = 27
    }
    FRA = {
        if = {
            limit = { NOT = { has_global_flag = weltkrieg_ITA_gets_occitania } }
            release = ADU
        }
        release = WFR
        release = OCC
        release = NFR
        #set_cosmetic_tag = RAU_France
    	if = {
    		limit = { country_exists = FWA }
    		annex_country = {
    			target = FWA
    			transfer_troops = yes
    		}
    	}
    	if = {
    		limit = { country_exists = FEA }
            annex_country = {
                target = FEA
                transfer_troops = yes
            }
    	}
        MLI = {
            add_state_core = 786
            add_state_core = 557
            
        }
        NGR = {
            add_state_core = 781
        }
        CHA = {
            add_state_core = 660
        }
        WAS = {
            add_state_core = 1057
        }
        ENG = {
            transfer_state = 779
        }
        if = {
            limit = {
                LBA  = {
                    exists = yes
                }
            }
            LBA = {
                transfer_state = 1072   
            }
        }
        else = {
            273 = {
                owner = {
                    transfer_state = 1072   
                }
            }
        }
        release = GAB
        
        release = SEN
        release = WAS
        release = VOL
        
        release = MLI
        release = DAH
        release = CHA
        release = CMR
        
        release = NGR
        release = CAR
        release = MOR
        release = ALG
        release = GHA
    }

    GHA = {
        transfer_state = 879
    }
	
	every_state = {
		limit = { is_owned_by = FRA is_on_continent = europe }
		GER = {
			transfer_state = PREV
		}
	}
	BRI = {
		add_state_core = 19
		add_state_core = 23
		add_state_core = 30
        keep_current_politics = yes
	}
    GER = {
        if = {
            limit = {
                NOT = { has_global_flag = weltkrieg_ITA_gets_occitania }
            }
            if = {
                limit = {
                    OR = {
                        has_dlc = "Death or Dishonor"
                    }
                }
                set_autonomy = {
                    target = OCC
                    autonomy_state = autonomy_reichsprotectorate
                    freedom_level = 750
                }
                else = { puppet = OCC }
            }
        }
        puppet = NFR
        puppet = WFR
        
	    release_puppet = BRI
        set_variable = {
            french_resistance_var = 70
        }
        set_variable = {
            french_compliance_var = 20
        }
    }
    BRI = {
        reset_government = yes
        remove_state_core = 19
		remove_state_core = 23
		remove_state_core = 30
		remove_state_core = 15
		remove_state_core = 29
		remove_state_core = 785
        every_controlled_state = {
            add_core_of = FRA
            set_resistance = GER.french_resistance_var
            set_compliance = GER.french_compliance_var
        }
    }
    WFR = {
        remove_state_core = 27
        every_controlled_state = {
            add_core_of = FRA
            set_resistance = GER.french_resistance_var
            set_compliance = GER.french_compliance_var
        }
        add_ideas = RK_collaborationist_army
    }
    ITA = {
        if = {
            limit = {
                has_global_flag = weltkrieg_ITA_gets_occitania
            }
            puppet = OCC
            else = {
                puppet = ADU
            }
        }
    }
    OCC = {
        if = {
            limit = {
                is_subject_of = ITA
            }
            set_cosmetic_tag = ITA_south_german_puppets
        }
        else = {
            reset_government = yes
            remove_state_core = 33
            remove_state_core = 25
            remove_state_core = 22
            remove_state_core = 26
            remove_state_core = 32
            remove_state_core = 20
            every_controlled_state = {
                add_core_of = FRA
                set_resistance = GER.french_resistance_var
                set_compliance = GER.french_compliance_var
            }
        }
    }
    NFR = {
        reset_government = yes
        remove_state_core = 18
        remove_state_core = 785
        remove_state_core = 29
        remove_state_core = 24
        remove_state_core = 803
        every_controlled_state = {
            add_core_of = FRA
            set_resistance = GER.french_resistance_var
            set_compliance = GER.french_compliance_var
        }
    }
    #  FRA = {
	#  	news_event = { id = france.215 hours = 3 }
	# }
    GER = {
        annex_country = {
            target = FRA
            transfer_troops = no
        }
        if = {
            limit = {
                has_global_flag = congo_revolt_fired
            }
            add_to_faction = COG
        }
        else = {
            release = COG
        }
    }
    ALG = {
        annex_country = {
            target = MOR
            transfer_troops = yes
        }
        declare_war_on = {
            target = GER
            type = topple_government
        }

    }
    event_target:new_continental_system_leader = {
        add_to_faction = ALG
    }
    
}

france_beats_prussia_peace_deal = {
    if = {
        limit = {
            ITA = {
                is_in_faction_with = GER
            }
        }
        ITA = {
        set_faction_leader = yes
       }
    }
    else = {
           random_country = {
               limit = {
                   is_in_faction_with = GER
                   NOT = {
                       tag = GER
                   }
               }
               set_faction_leader = yes
           }
       }
    FRA = { white_peace = GER  set_country_flag = FRA_has_beaten_prussia }

    
    FRA = {
        puppet = GER    
        transfer_state = 158
        transfer_state = 891
        transfer_state = 157
    }
    SHL = {
        add_state_core = 58
        transfer_state = 801
        add_state_core = 61
        }
    if = {
        limit = {
            has_global_flag = france_austria_split_deal
        }
        MAS = {
            add_state_core = 188
            add_state_core = 763
            add_state_core = 5
            add_state_core = 85
            add_state_core = 86
            add_state_core = 950
        }
         AUS = {
            puppet = MAS
        }
    }
    else = {
        MAS = {
        set_cosmetic_tag = austrian_french_puppet
        add_state_core = 188
        add_state_core = 763
        add_state_core = 5
        add_state_core = 85
        
        }
        FRA = {
            puppet = MAS
        }
        MAS = {
            set_politics = {
                ruling_party = neutrality
            }
            set_cosmetic_tag = kingdom_of_prussia
            create_country_leader = {
                name = "Napoleon, Duke of Prussia"
                desc = "NAPOELEON_DESC"
                picture = "gfx/leaders/NapoleonVIPortrait.dds"
                expire = "1965.1.1"
                ideology = despotic
                traits = {   
                }
            }
        }
    }
    GER = {
        release = SAX
        release = SHL
        release = MAS   
        set_cosmetic_tag = mandat_du_prussia
        set_cosmetic_tag = duchy_of_brandenburg
        set_politics = {
            ruling_party = neutrality
        }
        create_country_leader = {
            name = "Napoleon, Governor-General of Berlin"
            desc = "NAPOELEON_DESC"
            picture = "gfx/leaders/NapoleonVIPortrait.dds"
            expire = "1965.1.1"
            ideology = despotic
            traits = {   
            }
        }

    }
    if = {
        limit = {
            AUS = {
                is_puppet_of = FRA
            }
        }
        GER = {
            transfer_state = 67
            transfer_state = 66
        }
    }
    FGD = {
        transfer_state = 56
        transfer_state = 59
        transfer_state = 817
    }
    if = {
        limit = {
            has_global_flag = france_austria_split_deal
        }
        GPU = {
            transfer_state = 60
        }
        HES = {
            transfer_state = 960
        }
    }
    else = {
        FGD = {
            transfer_state = 60
        }
        FGD = {
            transfer_state = 960
        }
    }
    ITA = {
        set_politics = {
            ruling_party = democratic
        }
    }
    FRA = {
        puppet = SHL
    }
    if = {
        limit = {
            has_global_flag = france_austria_split_deal
        }
        AUS = {
            puppet = SAX
        }
    }
    else = {
        FRA = {
            puppet = SAX
        }
        SAX = {
            set_cosmetic_tag = mandat_du_saxony
            set_politics = {
                ruling_party = neutrality
            }
            create_country_leader = {
                name = "Napoleon, Protector of Saxony"
                desc = "NAPOELEON_DESC"
                picture = "gfx/leaders/NapoleonVIPortrait.dds"
                expire = "1965.1.1"
                ideology = despotic
                traits = {   
                }
            }
        }
    }
   
    SHL = {
        set_cosmetic_tag = mandat_du_schelswig
        set_politics = {
            ruling_party = neutrality
        }
        create_country_leader = {
            name = "Napoleon, Duke of Schleswig"
            desc = "NAPOELEON_DESC"
            picture = "gfx/leaders/NapoleonVIPortrait.dds"
            expire = "1965.1.1"
            ideology = despotic
            traits = {   
            }
        }
    }
    if = {
        limit = {
            has_global_flag = austria_defeated
        }
        france_beats_austria = yes
    }
    
}
d_france_beats_prussia_peace_deal = {
    france_beats_prussia_peace_deal = yes
}
france_beats_austria = {
    random_country = {
        limit = {
            is_in_faction_with = AUS
            NOT = {
                tag = AUS
            }
            NOT = {
                is_puppet = yes
            }
        }
        set_faction_leader = yes
    }
    every_country = {
        limit = {
            is_puppet_of = AUS
        }
        AUS = {
            set_autonomy = {
                target = PREV
                autonomy_state = autonomy_free
            }
        }
        FRA = {
            set_autonomy = {
                target = PREV
                autonomy_state = autonomy_puppet
            }
        }
    }
    FRA = {
        white_peace = AUS 
    }
    FGD = {
        
        transfer_state = 153  
        transfer_state = 55  
        transfer_state = 54
        transfer_state = 954  
        transfer_state = 50  
        transfer_state = 52  
        transfer_state = 53  
        transfer_state = 60
        set_cosmetic_tag = FGD_RHE
    }
    if = {
        limit = {
            GER = {
                is_puppet_of = FRA
            }
        }
        GER = {
            transfer_state = 67
            transfer_state = 66
            transfer_state = 65
            transfer_state = 949
        }
    }
    if = {
        limit = {
            CZE = {
                exists = yes
            }
        }
        
        else = {
            AUS = {
                release = CZE
            }
            GER = {
                release = CZE
            }
        }
        
    }
    FRA = {
        puppet = CZE
    }
    CZE = {
        set_cosmetic_tag = austrian_french_puppet
    }
    if = {
        limit = {
            HUN = {
                exists = yes
            }
        }
        else = {
            AUS = {
                release = HUN
            }
            
        }
    }
    FRA = {
        puppet = HUN
    }
    if = {
        limit = {
            ITF = {
                exists = yes
            }
        }
        else = {
            AUS = {
                release = ITF
            }
        }
    }
    ITF = {
        add_state_core = 736
        transfer_state = 736
    }
    FGD = {
        transfer_state = 805
    }
    FRA = {
        puppet = ITF
    }
    if = {
        limit = {
            CRO = {
                exists = yes
            }
        }
        else = {
            AUS = {
                release = CRO
            }
        }
    }
    CRO = {
        transfer_state = 104
        transfer_state = 819
        transfer_state = 810
        transfer_state = 812
        transfer_state = 809
    }
    FRA = {
        puppet = CRO
    }
    if = {
        limit = {
            POL = {
                exists = yes
                is_in_faction_with = FRA
            }
            
        }
        POL = {
            transfer_state = 762
            transfer_state = 88
            transfer_state = 762
            transfer_state = 951
            transfer_state = 89
            transfer_state = 86
            transfer_state = 91
        }
        else = {
            AUS = {
                release = GLC
            }
            FRA = {
                puppet = GLC
            }
            GLC = {
                transfer_state = 91
            }
        }
    }
    FRA = {
        transfer_state = 103
        transfer_state = 163
        transfer_state = 816
        transfer_state = 815
    }
    if = {
        limit = {
            NOT = {
                AUS = {
                    owns_state = 4
                }
            }
        }
        AUS = {
            set_cosmetic_tag = austrian_french_puppet
            transfer_state = 4
            transfer_state = 152
            transfer_state = 822
            transfer_state = 750
            transfer_state = 820

            transfer_state = 102
        }
    }
    FRA = {
        puppet = AUS
    }
    AUS = {
        set_cosmetic_tag = vienna_government
    }
}
france_beats_netherlands = {
    HOL = {
        white_peace = FRA
    }
    if = {
        limit = {
            FRA = {
                owns_state = 6
            }
        }
        FRA = {
            add_state_core = 35
            transfer_state = 35
            puppet = HOL
        }
        HOL = {
            set_cosmetic_tag = holland
        }
    }
    else = {
        HOL = {
            set_cosmetic_tag = holland
        }
        FRA = {
            puppet = HOL
        }
    }
    FRA = {
        transfer_state = 309
        transfer_state = 966
        transfer_state = 695
    }
}
france_beats_netherlands_commie = {
    JNE = {
        white_peace = FRA
    }
    if = {
        limit = {
            FRA = {
                owns_state = 6
            }
        }
        FRA = {
            add_state_core = 35
            transfer_state = 35
            puppet = JNE
        }
        JNE = {
            set_cosmetic_tag = holland
        }
    }
    else = {
        JNE = {
            set_cosmetic_tag = holland
        }
        FRA = {
            puppet = JNE
        }
    }
    FRA = {
        transfer_state = 309
        transfer_state = 966
        transfer_state = 695
    }
}



russia_beats_prussia = {
	SOV = {
		puppet = GER
	}
}
russia_beats_france = {
    every_country = {
        limit = {
            OR = {
                tag = FRA
                is_puppet_of = FRA
            }
        }
        SOV = {
            puppet = PREV
        }
    }
}

russia_beats_ottoman_peace_deal = {
    set_global_flag = russia_beats_ottoman_peace_deal_only_once
    TUR = {
        white_peace = SOV
    }
    TRB = {
        transfer_state = 1041
    }
    SOV = {
        transfer_state = 341
    }
    PER = {
        transfer_state = 413
        transfer_state = 419
        transfer_state = 421
        transfer_state = 1084
    }
    PAL = {
        add_state_core = 455
    }


    SYR = {
        keep_current_politics = yes
        add_state_core = 553
    }
    IRQ = {
        keep_current_politics = yes
        add_state_core = 656
    }
    PAL = {
        keep_current_politics = yes
    }
    BYZ = {
        keep_current_politics = yes
    }
    release_byazntium = yes

    release = SYR
    release = PAL
    #release = LEB
    
    release = IRQ
    
    SAU = {
        annex_country = {
            target = HEJ
            transfer_troops = yes
        }
        transfer_state = 876
    }
    release = TUR
    TUR = {
        every_controlled_state = {
            add_core_of = TUR
        }
        set_cosmetic_tag = russian_occupied_ottomans
        set_popularities = {
            democratic = 33
            democratic_communism = 10
            communism = 9
            democratic_liberalism = 12
            neutrality = 25
            fascism = 11
        }
        set_politics = {
            ruling_party = democratic
        }
        create_country_leader = {
            name = "Abdulmejid II"
            desc = "POLITICS_MUSTAFA_KEMAL_ATATÜRK_DESC"
            picture = "gfx/leaders/AbdulmejidIIPortrait.dds"
            ideology = democratic_conservative
            traits = {
                
            }
        }
        keep_current_politics = yes
    }
    SOV = {
        news_event = { id = TUR_turan_anti_SOV_revolt_event.3 hours = 8 }
        news_event = { id = TUR_turan_anti_SOV_revolt_event.2 days = 3 }
        news_event = { id = SOV_brit_conflict.1 days = 2 }
        puppet = SYR
        #puppet = ISR
        #puppet = LEB
        puppet = IRQ
        puppet = TUR
        puppet = BYZ
    }
    ENG = {
        puppet = PAL
    }
    SYR = {
        reset_government = yes
    }
    IRQ = {
        reset_government = yes
    }
    PAL = {
        reset_government = yes
    }
    TUR = {
        reset_government = yes
    }
    BYZ = {
        reset_government = yes
    }
    if = {
        limit = {
            SAU = {
                is_in_faction_with = SOV
            }
        }
        SAU = {
            white_peace = TUR
            annex_country = {
                target = JAB
                transfer_troops = no
            }
            annex_country = {
                target = BNK
                transfer_troops = no
            }
            annex_country = {
                target = BTA
                transfer_troops = no
            }
            annex_country = {
                target = ANA
                transfer_troops = no
            }
        }
    }
}


release_byazntium = { 
    BYZ = { transfer_state = 948 add_state_core = 948 }
    BYZ = { transfer_state = 341 add_state_core = 341 }
    BYZ = { set_capital = { state = 49 } }
    BYZ = { transfer_state = 347 add_state_core = 347 }
    BYZ = { transfer_state = 340 add_state_core = 340 }
    BYZ = { transfer_state = 834 add_state_core = 834 }
    BYZ = { transfer_state = 339 add_state_core = 339 }
    BYZ = { transfer_state = 836 add_state_core = 836 }
    BYZ = { set_politics = { ruling_party = democratic elections_allowed = no } }
}

argentina_loses_peace_deal = {
    PBC = {
        white_peace = ARG
    }
	PBC = { transfer_state = 998 }
	PBC = {
		puppet = ARG
		puppet = CHL
		puppet = PAT
	}
	PAR = { transfer_state = 1015 }
	PAR = { puppet = ERS }
	ERS = {
		transfer_state = 1035
		transfer_state = 510	
        set_politics = {
            ruling_party = neutrality
        }				
	}
	PAT = {
		transfer_state = 512
		transfer_state = 1027
		transfer_state = 1022
		transfer_state = 1023
		transfer_state = 1030
		transfer_state = 1028
	}
	URG = {
		transfer_state = 300
		transfer_state = 1040
	}	
	CHL = { transfer_state = 279 }
	ARG = {
		transfer_state = 278
		transfer_state = 1033
		transfer_state = 511
		transfer_state = 1036
		transfer_state = 509
		transfer_state = 1034
	}	
	
}



argentina_beats_bruhzil = {
    ARG = {
        transfer_state = 504
        transfer_state = 1037
        transfer_state = 503
        transfer_state = 502
        transfer_state = 1012
    }
    BMJ = {
        transfer_state = 495
        transfer_state = 508
        transfer_state = 967
        transfer_state = 983
        transfer_state = 986
        transfer_state = 991
        transfer_state = 1004
        transfer_state = 1016
        transfer_state = 1020
        transfer_state = 497
        transfer_state = 1017
        transfer_state = 280
        transfer_state = 505
    }
    BRS = {
        transfer_state = 1011
        transfer_state = 503
        transfer_state = 984
        transfer_state = 501
        transfer_state = 500
        transfer_state = 1011
        transfer_state = 496
        transfer_state = 1010
        set_cosmetic_tag = south_syndi_state_of_brazil
    }
    BRE = {
        transfer_state = 1003
        transfer_state = 1005
        transfer_state = 1007        
        transfer_state = 1006
        transfer_state = 1008
        transfer_state = 1009
        transfer_state = 499
        transfer_state = 989
        transfer_state = 498
        set_cosmetic_tag = north_brazilian_occupation_force

        
    }
    ARG = {
        puppet = BRE
        puppet = BRS
        puppet = BMJ
    }
    BMJ = {
        set_politics = {
            ruling_party = neutrality
        }
    }
}

d_brazil_setup = {
    UBR = {
        annex_country = {
            target = BRE
            transfer_troops = no
        }
        annex_country = {
            target = BRS
            transfer_troops = no
        }
    }
    ARG = {
        annex_country = {
            target = URG
            transfer_troops = no
        }
    }
}

austria_beats_serbia_peace_deal = {
    if = {
        limit = {
            BOS = {
                exists = yes
            }
        }
        AUS = {
            remove_state_core = 814
            remove_state_core = 818
        }
        BOS = {
            add_state_core = 814
            add_state_core = 818
            transfer_state = 814
            transfer_state = 818
        }
        release_puppet = MNT
        puppet = YUG
    }
    if = {
        limit = {
            BOS = {
                exists = no
            }
        }
        AUS = {
            transfer_state = 814
            transfer_state = 818
        }
     
        release_puppet = MNT
        puppet = YUG
    }
}

russia_loses_peace_deal = {
    UKR = {
        add_state_core = 93
        add_state_core = 137
        add_state_core = 220
        add_state_core = 240
        remove_state_core = 766
    }
    POL = {
        add_state_core = 784
        add_state_core =  189
        add_state_core = 190
        add_state_core = 11
    }
    BLR = {
        add_state_core = 94
        add_state_core = 95
        add_state_core = 96
    }
    EST = {
        add_state_core = 191
        add_state_core = 13
        add_state_core = 12
    }
    NYK = {
        add_state_core = 234
        add_state_core = 218
        add_state_core = 238
        add_state_core = 245
    }
    RRR = {
        add_state_core = 195
        add_state_core = 244
        add_state_core = 263
        add_state_core = 208
        add_state_core = 209
        add_state_core = 210
        add_state_core = 195
        add_state_core = 246
        add_state_core = 264
        add_state_core = 247
    }
    LNU = {
        add_state_core = 219
        add_state_core = 242
        add_state_core = 205
        add_state_core = 223
        add_state_core = 243
        add_state_core = 224
        add_state_core = 222
    }
    SOV = {
        release = UKR
        release = POL
	    release = BLR
        release = EST
        release = MOL
        release = NYK
        release = RRR
        release = LNU

    }

    AUS = {
        puppet = UKR
        puppet = POL
        puppet = BLR
        puppet = MOL
        puppet = EST
        puppet = NYK
        puppet = RRR
        puppet = LNU
    }
    if = {
        limit = {
            GLC = {
                exists = yes
            }
        }
        GLC = { transfer_state = 91 }
        POL = { transfer_state = 92 }
        POL = { transfer_state = 90 }
    }
    else = {
        AUS = { transfer_state = 91 }
        AUS = { transfer_state = 92 }
        AUS = { transfer_state = 90 }
    }

    if = {
        limit = {
            TUR = {
                is_in_faction_with = SOV
            }
        }
        ottoman_beats_russia_peace_deal = yes
    }
    else = {
        TUR = {
            annex_country = {
                target = TRB
                transfer_troops = yes
            }
        }
        GEO = {
            transfer_state = 1085
            transfer_state = 232
            transfer_state = 235
            transfer_state = 231
            transfer_state = 229
            transfer_state = 233
            transfer_state = 230
            transfer_state = 1082
            transfer_state = 1083
            add_state_core = 1085
            add_state_core = 232
            add_state_core = 235
            add_state_core = 231
            add_state_core = 229
            add_state_core = 233
            add_state_core = 230
            add_state_core = 1082
            add_state_core = 1083
        }
        AUS = {
            puppet = GEO
        }
    }
    SOV_release_just_central_asia = yes
    FIN = {
        add_state_core = 216
        add_state_core = 215
        add_state_core = 213
    }
    SOV_release_FIN = yes
    AUS = {
        add_to_faction = FIN
    }
    
}

ottoman_beats_russia_peace_deal = {
    TUR = {
        annex_country = {
            target = TRB
            transfer_troops = yes
        }
        transfer_state = 230
        transfer_state = 1082
        set_politics = {
            ruling_party = neutrality
        }
    }
    random_list = {
       50 = { ottoman_recentralization_peace_deal = yes }
       0 = { ottoman_federaralisation_peace_deal = yes }
    }
}

russia_loses_peace_to_france_deal = {
    FRA = {
        white_peace = SOV
    }
    
    UKR = {
        add_state_core = 93
        add_state_core = 137
        add_state_core = 220
        add_state_core = 240
        remove_state_core = 766
    }
    if = {
        limit = {
            GLC = {
                exists = yes
                is_puppet_of = FRA
            }
        }
        POL = {
            transfer_state = 88
            transfer_state = 762
            transfer_state = 951
            transfer_state = 89
            
        }
        if = {
            limit = {
                GER = {
                    is_puppet_of = FRA
                }
            }
            POL = {
                transfer_state = 86
            }
        }
        FRA = {
            puppet = POL
        }
    }
    BLR = {
        add_state_core = 94
        add_state_core = 95
        add_state_core = 96
        add_state_core = 784
    }
    EST = {
        add_state_core = 191
        add_state_core = 13
        add_state_core = 12
        add_state_core =  189
        add_state_core = 190
        add_state_core = 11
    }
    # NYK = {
    #     add_state_core = 234
    #     add_state_core = 218
    #     add_state_core = 238
    #     add_state_core = 245
    # }
    # RRR = {
    #     add_state_core = 195
    #     add_state_core = 244
    #     add_state_core = 263
    #     add_state_core = 208
    #     add_state_core = 209
    #     add_state_core = 210
    #     add_state_core = 195
    #     add_state_core = 246
    #     add_state_core = 264
    #     add_state_core = 247
    # }
    # LNU = {
    #     add_state_core = 219
    #     add_state_core = 242
    #     add_state_core = 205
    #     add_state_core = 223
    #     add_state_core = 243
    #     add_state_core = 224
    #     add_state_core = 222
    # }
    SOV = {
        release = UKR
        release = POL
	    release = BLR
        release = EST
        release = MOL
        # release = NYK
        # release = RRR
        # release = LNU

    }
    ROM = {
        annex_country = {
            target = MOL
            transfer_troops = no
        }
    }
    FRA = {
        puppet = UKR
        puppet = POL
        puppet = BLR
        puppet = MOL
        puppet = EST
        # puppet = NYK
        # puppet = RRR
        # puppet = LNU
        # transfer_state = 91
    }
    if = {
        limit = {
            TUR = {
                is_in_faction_with = SOV
            }
        }
        ottoman_beats_russia_peace_deal = yes
    }
    else = {
        TUR = {
            annex_country = {
                target = TRB
                transfer_troops = yes
            }
        }
    }
    SOV_release_just_central_asia = yes
    
    SOV_release_FIN = yes
    if = {
        limit = {
            has_global_flag = austria_defeated
        }
        france_beats_austria = yes 
    }
    
    
}

russia_loses_to_prussia_deal = {
    SOV = {
        white_peace = GER
    }
    POL = {
        
    }
    SOV = {
        release = POL
    }
    POL = {
        set_cosmetic_tag = prussian_rk
    }
    GER = {
        transfer_state = 1025
        add_state_core = 1025
    }
    LIT = { 
        add_state_core = 190
        add_state_core = 11
        add_state_core = 784
        add_state_core = 12
        add_state_core = 190
        add_state_core = 191
        add_state_core = 13
        add_state_core = 189
    }
    SOV = {
        release = LIT   
    }
    LIT = {
        set_cosmetic_tag = prussian_rk
    }
    SOV = {
        release = UKR
    }
    UKR = {
        set_cosmetic_tag = prussian_rk
        transfer_state = 137
        transfer_state = 218
        add_state_core = 137
        add_state_core = 218
        add_state_core = 93
    }

    if = {
        limit = {
            ROM = {
                is_in_faction_with = SOV
            }
        }
        GER = {
            puppet = ROM
        }
        
    }
    ROM = {
        transfer_state = 78
        transfer_state = 766
    }
    if = {
        limit = {
            GLC = {
                is_in_faction_with = GER
            }
        }
        GLC = {
            transfer_state = 89
            transfer_state = 91
        }
    }
    BLR = {
        add_state_core = 96
        add_state_core = 94
        add_state_core = 95
        set_cosmetic_tag = prussian_rk
    }
    SOV = {
        release = BLR
    }

    GEO = {
        transfer_state = 1085
        transfer_state = 232
        transfer_state = 235
        transfer_state = 231
        transfer_state = 229
        transfer_state = 233
        transfer_state = 230
        transfer_state = 1082
        transfer_state = 1083
        transfer_state = 234
        transfer_state = 238
        transfer_state = 237
        add_state_core = 1085
        add_state_core = 232
        add_state_core = 235
        add_state_core = 231
        add_state_core = 229
        add_state_core = 233
        add_state_core = 230
        add_state_core = 1082
        add_state_core = 1083
        set_cosmetic_tag = prussian_rk
    }
  
    RRR = {
        add_state_core = 195
        add_state_core = 208
        add_state_core = 209
        add_state_core = 244
        add_state_core = 263
        add_state_core = 246
        add_state_core = 210
        add_state_core = 277
        set_cosmetic_tag = prussian_rk
    } 
    SOV = {
        release = RRR
    }
    LNU = {
        add_state_core = 242
        add_state_core = 219
        add_state_core = 243
        add_state_core = 205
        add_state_core = 223
        add_state_core = 254
        add_state_core = 224
        add_state_core = 242
        add_state_core = 222
        add_state_core = 258
        add_state_core = 220
        add_state_core = 242
        add_state_core = 240
        add_state_core = 242
        add_state_core = 260
        add_state_core = 265
        add_state_core = 242
        add_state_core = 217
        add_state_core = 245
        set_cosmetic_tag = prussian_rk
    }
    SOV = {
        release = LNU
    }
    
    GER = {
        puppet = POL
        puppet = UKR
        puppet = LIT
        puppet = BLR
        puppet = GEO
        puppet = RRR
        puppet = LNU
    }
   
}



russia_xinjiang_peace_deals = {
    if = {
        limit = {
            has_country_leader = {
                name = "Vladimir Lenin"
                ruling_only = yes
            }
        }
        PREV = {
            white_peace = SOV
            white_peace = NRX
        }
        NRX = {
            annex_country = {
                target = PREV
                transfer_troops = no
            }
        }
    }
}

russia_afghanistan_peace_deals = {
    AFG = {
        white_peace = SOV
        
    }
    SOV = {
        puppet = AFG 
    }
    AFG = {
        if = {
            limit = {
                has_government = democratic
            }
            create_country_leader = {
                name = "Mohammed Zahir Shah"
                desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
                picture = "Portrait_Afghanistan_Mohammed_Zahir_Shah.dds"
                expire = "1965.1.1"
                ideology = democratic_conservative
                traits = {
                    #
                }
            }
        }
        if = {
            limit = {
                has_government = democratic_liberalism
            }
            create_country_leader = {
                name = "Mohammed Zahir Shah"
                desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
                picture = "Portrait_Afghanistan_Mohammed_Zahir_Shah.dds"
                expire = "1965.1.1"
                ideology = democratic_conservative
                traits = {
                    #
                }
            }
        }
        if = {
            limit = {
                has_government = socialism_democratic
            }
            create_country_leader = {
                name = "Mohammed Daoud Khan"
                desc = ""
                picture = "gfx/leaders/MohammedDaoudKhan.dds"
                expire = "1965.1.1"
                ideology = social_democratic
                traits = {
                    #
                }
            }
        }
    }
}

russia_persian_peace_deals = {
    PER = {
        white_peace = SOV
        
    }
    SOV = {
        puppet = PER 
    }
    PER = {
        if = {
            limit = {
                has_government = democratic
            }
            create_country_leader = {
                name = "Ahmed Shah Qajar"
                desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
                picture = "gfx/leaders/Qajar.dds"
                expire = "1965.1.1"
                ideology = democratic_conservative
                traits = {
                    #
                }
            }
        }
        if = {
            limit = {
                has_government = democratic_liberalism
            }
            create_country_leader = {
                name = "Ahmed Shah Qajar"
                desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
                picture = "gfx/leaders/Qajar.dds"
                expire = "1965.1.1"
                ideology = democratic_conservative
                traits = {
                    #
                }
            }
        }
        if = {
            limit = {
                has_government = socialism_democratic
            }
            create_country_leader = {
                name = "Ahmed Shah Qajar"
                desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
                picture = "gfx/leaders/Qajar.dds"
                expire = "1965.1.1"
                ideology = social_democratic
                traits = {
                    #
                }
            }
        }
    }
}

ira_peace_deal = {
    IRA = {
        white_peace = ENG
    }
    IRE = {
        annex_country = {
            target = IRA
            transfer_troops = no
        }
    }
}

america_venezuela_peace_deal = {
    set_country_flag = USA_caracas_conference_unlock
    VEN = {
        white_peace = COL
        white_peace = USA
        create_country_leader = {
            name = "Nelson Rockefeller"
            picture = "gfx/leaders/Nelson_Rockefeller.dds"
            desc = ""
            ideology = social_democratic
        }
    }
    USA = {
        puppet = VEN
    }
    
}

america_beats_argentina = {
    annex_country = {
        target = CHL
    }
    annex_country = {
        target = ARG
    }
    if = {
        limit = {
            country_exists = PAR
            PAR = {
                has_war_with = ARG
            }
        }
        PAR = { transfer_state = 1015 }
        else = {
            release = PAR
        }
    }
    if = {
        limit = {
            country_exists = PBC
            PBC = {
                has_war_with = ARG
            }
        }
        PBC = {
            transfer_state = 998
        }
        else = {
            USA = {
                annex_country = {
                    target = PRU
                }
                annex_country = {
                    target = BOL
                }
            }
            every_state = {
                limit = { OR = { is_core_of = BOL is_core_of = PRU } NOT = { is_core_of = PBC } }
                add_core_of = PBC
            }
            USA = {
                release = PBC
            }
        }
    }
    if = {
        limit = { URG = { exists = no } }
        release = URG
    }

    if = {
        limit = {
            USA = {
                OR = {
                    has_country_leader = {
                        name = "William Gibbs McAdoo"
                        ruling_only = yes
                    }
                    has_country_flag = USA_vengeful_occupation_arg
                }
            }
        }
        USA = {
            puppet = ARG
            puppet = CHL
        }
        ARG = {
            add_popularity = {
                ideology = neutrality
                popularity = 0.35
            }
            set_politics = {
                ruling_party = neutrality
            }
            set_cosmetic_tag = USA_mandate
        }
        CHL = {
            add_popularity = {
                ideology = neutrality
                popularity = 0.35
            }
            set_politics = {
                ruling_party = neutrality
            }
            set_cosmetic_tag = USA_mandate
        }
    }
}

america_beats_brazil = {
    if = {
        limit = {
            USA = {
                OR = {
                    has_country_leader = {
                        name = "William Gibbs McAdoo"
                        ruling_only = yes
                    }
                    has_country_flag = USA_vengeful_occupation_arg
                }
            }
        }
        if = {
            limit = {
                BRE = { is_in_faction_with = ARG }
            }
            USA = {
                annex_country = {
                    target = BRE
                }
            }
        }
        if = {
            limit = {
                BRS = { is_in_faction_with = ARG }
            }
            USA = {
                annex_country = {
                    target = BRS
                }
            }
        }
        if = {
            limit = {
                SRB = { is_in_faction_with = ARG }
            }
            USA = {
                annex_country = {
                    target = SRB
                }
            }
        }
        USA = {
            release_puppet = FLF
            release_puppet = UBR
        }
        FLF = {
            add_popularity = {
                ideology = neutrality
                popularity = 0.35
            }
            set_politics = {
                ruling_party = neutrality
            }
            set_cosmetic_tag = USA_mandate
        }
        else = {
            if = {
                limit = {
                    BRE = { is_in_faction_with = ARG }
                }
                USA = {
                    annex_country = {
                        target = BRE
                    }
                    release = UBR
                }
            }
            if = {
                limit = {
                    BRS = { is_in_faction_with = ARG }
                }
                USA = {
                    annex_country = {
                        target = BRS
                    }
                    release = UBR
                }
            }
            if = {
                limit = {
                    SRB = { is_in_faction_with = ARG }
                }
                USA = {
                    annex_country = {
                        target = SRB
                    }
                    release = UBR
                }
            }
        }
    }
}


ottoman_recentralization_peace_deal = {
    annex_country = {target = SYR transfer_troops = no }
    annex_country = {target = PAL transfer_troops = no }
    annex_country = {target = LEB transfer_troops = no }
    annex_country = {target = IRQ transfer_troops = no }
    annex_country = {target = JOR transfer_troops = no }
 annex_country = {target =  BYZ transfer_troops = no }
}

d_ottoman_recentralization_peace_deal = {
    annex_country = {target = SYR transfer_troops = no }
    annex_country = {target = PAL transfer_troops = no }
    annex_country = {target = LEB transfer_troops = no }
    annex_country = {target = IRQ transfer_troops = no }
    annex_country = {target = JOR transfer_troops = no }

}


ottoman_federaralisation_peace_deal = {
    SOV = {
        release = SYR
        release = PAL
        release = LEB
        release = IRQ
        release = JOR
    }
    puppet = SYR
    puppet = PAL
    puppet = LEB
    puppet = IRQ
    puppet = JOR
}
d_ottoman_federaralisation_peace_deal = {
    SOV = {
        release = SYR
        release = PAL
        release = LEB
        release = IRQ
        release = JOR
    }
    puppet = SYR
    puppet = PAL
    puppet = LEB
    puppet = IRQ
    puppet = JOR
}


france_beats_the_uk = {
    FRA = { 
        add_ideas = FRA_english_occupation
	puppet = RAJ
	annex_country = {
		target = ENG
		transfer_troops = no
	}
        release_puppet = SCO
        release_puppet = WLS
        puppet = IRE
        release_puppet = ENG
	every_state = {
		limit = { is_core_of = ENG OR = { is_core_of = WLS is_core_of = SCO is_core_of = IRE } }
		remove_core_of = ENG
	}
	IRE = { set_cosmetic_tag = IRE_FRA }
        annex_country = {
            target = SCA
            transfer_troops = no
        }

        transfer_state = 659
        transfer_state = 658
        transfer_state = 964
    }
    if = {
        limit = {
            FEA = {
                exists = yes
            }
        }
        FEA = {
            annex_country = {
                target = SUD
                transfer_troops = no
            }
            transfer_state = 548
            transfer_state = 1056
            transfer_state = 768
	    transfer_state = 770
	    transfer_state = 1070
	    transfer_state = 1071
            transfer_state = 769
            transfer_state = 1063
            transfer_state = 1050
            transfer_state = 1021
            transfer_state = 1019
            transfer_state = 1045
            transfer_state = 771
            transfer_state = 885
            transfer_state = 1062

            annex_country = {
                target = ZIM
                transfer_troops = no
            }
            annex_country = {
                target = BOT
                transfer_troops = no
            }
            annex_country = {
                target = SAF
                transfer_troops = no
            }
            
        }
        FWA = {
            transfer_state = 274
            transfer_state = 701
            annex_country = {
                target = NGA
                transfer_troops = no
            }
        }

    }
    else = {
        FRA = {
            annex_country = {
                target = SUD
                transfer_troops = no
            }
            transfer_state = 548
            transfer_state = 1056
            transfer_state = 768
	    transfer_state = 770
	    transfer_state = 1070
	    transfer_state = 1071
            transfer_state = 769
            transfer_state = 1063
            transfer_state = 1050
            transfer_state = 1021
            transfer_state = 1019
            transfer_state = 1045
            transfer_state = 771
            transfer_state = 885
            transfer_state = 1062

            annex_country = {
                target = ZIM
                transfer_troops = no
            }
            annex_country = {
                target = BOT
                transfer_troops = no
            }
            annex_country = {
                target = SAF
                transfer_troops = no
            }
            transfer_state = 274
            transfer_state = 701
            annex_country = {
                target = NGA
                transfer_troops = no
            }
        }
    }
}

prussia_beats_the_uk = {
    GER = { 
	puppet = RAJ
	annex_country = {
		target = ENG
		transfer_troops = no
	}
        release_puppet = SCO
        release_puppet = WLS
        puppet = IRE
        release_puppet = ENG

        SCO = {
        set_cosmetic_tag = prussian_rk
        }
        WLS = {
        set_cosmetic_tag = prussian_rk
        }
        ENG = {
        set_cosmetic_tag = prussian_rk
        }
	every_state = {
		limit = { is_core_of = ENG OR = { is_core_of = WLS is_core_of = SCO is_core_of = IRE } }
		remove_core_of = ENG
	}
	IRE = { set_cosmetic_tag = IRE_GER         set_cosmetic_tag = prussian_rk }
        annex_country = {
            target = SCA
            transfer_troops = no
        }

        transfer_state = 659
        transfer_state = 658
        transfer_state = 964
    }
    
        GER = {
            annex_country = {
                target = SUD
                transfer_troops = no
            }
            transfer_state = 548
            transfer_state = 1056
            transfer_state = 768
	    transfer_state = 770
	    transfer_state = 1070
	    transfer_state = 1071
            transfer_state = 769
            transfer_state = 1063
            transfer_state = 1050
            transfer_state = 1021
            transfer_state = 1019
            transfer_state = 1045
            transfer_state = 771
            transfer_state = 885
            transfer_state = 1062

            annex_country = {
                target = ZIM
                transfer_troops = no
            }
            annex_country = {
                target = BOT
                transfer_troops = no
            }
            annex_country = {
                target = SAF
                transfer_troops = no
            }
            transfer_state = 274
            transfer_state = 701
            annex_country = {
                target = NGA
                transfer_troops = no
            }
        }

        if = {
            limit = {
                ITA = {
                    is_in_faction_with = GER
                }
            }
            ITA = {
                annex_country = {
                    target = EGY
                    transfer_troops = yes
                }
            }
        }
        else = {
             GER = {
                annex_country = {
                    target = EGY
                    transfer_troops = yes
                }
            }
        }
    
}

AUS_reconquers_SGC = {
    AUS = {
        puppet = GPU
    }
    GPU = { add_ideas = GPU_garrisson_state }
    set_country_flag = SGC_court_opposition_crushed
}

spain_loses_to_brothers_coalition = {
    every_country = {
        limit = { is_in_faction_with = GER has_war_with = SPR }
        SPR = {
            white_peace = PREV
        }
    }
    if = {
        limit = { OCC = { is_in_faction_with = GER } }
        OCC = {
            transfer_state = 165
            transfer_state = 794
            transfer_state = 166
            add_state_core = 165
            add_state_core = 794
            add_state_core = 166
        }
    }
    NAV = {
        add_state_core = 171
        add_state_core = 790
        add_state_core = 174
        add_state_core = 792
        add_state_core = 172
        add_state_core = 176
        add_state_core = 791
        set_cosmetic_tag = prussian_rk
        set_popularities = {
            fascism = 40
            ultranationalism = 30
            democratic = 10
            democratic_communism = 20
        }
        set_politics = {
            ruling_party = fascism
        }
        keep_current_politics = yes
    }
    SPR = {
        create_country_leader = {
            name = "Ramón Serrano Suñer"
            picture = "gfx//leaders//Europe//Portrait_Europe_Generic_3.dds"
            expire = "1965.1.1"
            ideology = national_syndicalism
        }
        set_popularities = {
            fascism = 20
            ultranationalism = 50
            neutrality = 10
            democratic = 10
            democratic_communism = 10
        }
        set_politics = {
            ruling_party = ultranationalism
        }
        keep_current_politics = yes
        release = NAV
    }
    if = {
        limit = {
            ITA = { is_in_faction_with = GER }
        }
        ITA = {
            puppet = SPR
        }
        else = {
            GER = {
                puppet = SPR
            }
        }
    }
    GER = {
        puppet = NAV
    }
    every_country = {
        limit = {
            OR = {
                tag = NAV
                tag = SPR
            }
        }
        reset_government = yes
    }
}

austria_beats_spain_peace_deal = {
    if = {
        limit = {
            has_global_flag = FPR_gets_spain
        }
        FPR = {
            add_ideas = FPR_carlist_resistance
            annex_country = {
                target = SPR
            }
            set_cosmetic_tag = bourbon_monarchy
        }
        else = {
            AUS = {
                annex_country = {
                    target = SPR
                }
                release_puppet = SPR
            }
            SPR = {
                if = {
                    limit = {
                        has_idea = SPR_the_regency
                    }
                    remove_ideas = SPR_the_regency
                }
                create_country_leader = {
                    name = "Carlos VIII"
                    picture = "gfx//leaders//GER//Portrait_GEA_Prinz_Josias_Waldeck-Prymont.png"
                    expire = "1965.1.1"
                    ideology = despotic
                }
                create_country_leader = {
                    name = "Carlos VIII"
                    picture = "gfx//leaders//GER//Portrait_GEA_Prinz_Josias_Waldeck-Prymont.png"
                    expire = "1965.1.1"
                    ideology = authoritarian_democrat
                }
                create_country_leader = {
                    name = "Carlos VIII"
                    picture = "gfx//leaders//GER//Portrait_GEA_Prinz_Josias_Waldeck-Prymont.png"
                    expire = "1965.1.1"
                    ideology = christian_conservatism
                }
                set_politics = {
                    ruling_party = authoritarian_democratic
                    elections_allowed = no
                }
                set_popularities = {
                    authoritarian_democratic = 45
                    neutrality = 15
                    democratic = 20
                    fascism = 10
                    democratic_communism = 10
                }
            }
        }
    }
}
