FRA_level_up_deregulation = {
    if = {
        limit = {
            has_idea = FRA_deregulation
        }
        swap_ideas = {
				add_idea = FRA_deregulation_2
				remove_idea = FRA_deregulation
		}
    }

    if = {
        limit = {
            has_idea = FRA_deregulation_2
        }
        swap_ideas = {
				add_idea = FRA_deregulation_3
				remove_idea = FRA_deregulation_2
		}
    }
}

FRA_level_up_workers_idea = {
	if = {
		limit = {
			NOT = {
				has_idea = FRA_workers_idea
			}
		}
		add_ideas = FRA_workers_idea
	}
    if = {
        limit = {
            has_idea = FRA_workers_idea
        }
        swap_ideas = {
				add_idea = FRA_FRA_workers_idea_2
				remove_idea = FRA_FRA_workers_idea
		}
    }

    if = {
        limit = {
            has_idea = FRA_FRA_workers_idea_2
        }
        swap_ideas = {
				add_idea = FRA_FRA_workers_idea_3
				remove_idea = FRA_FRA_workers_idea_2
		}
    }
}

FRA_peasent_revolt_effect = {
  if = {
      limit = {
        check_variable = { FRA_peasent_revolt_var > 40 }
      }
      set_variable = {
        test_var = 0
      }
      every_owned_state = {
          limit = {
              OR = {has_state_category = city has_state_category = large_city}
              NOT = {id = 16 }
              is_on_continent = europe
          }
          FPR = {
              transfer_state = PREV
          }
          create_unit = {
            division = "name = \"Peasant Army\" division_template = \"Peasant Army\" start_experience_factor = 0.5 start_equipment_factor = 0.5"

            owner = FPR
          }
          create_unit = {
            division = "name = \"Peasant Army\" division_template = \"Peasant Army\" start_experience_factor = 0.5 start_equipment_factor = 0.5"

            owner = FPR
          }
          add_to_variable = { PREV.test_var = 1 }
      }
      declare_war_on = {
          target = FPR
          type = annex_everything
      }
  }
  else_if = {
      limit = {
          check_variable = { FRA_peasent_revolt_var > 25 }
      }
      random_owned_controlled_state = {
          limit = {
              OR = {has_state_category = city has_state_category = large_city}
              NOT = {id = 16 }
              is_on_continent = europe
          }
          FPR = {
              transfer_state = PREV
          }
          create_unit = {
            division = "name = \"Peasant Army\" division_template = \"Peasant Army\" start_experience_factor = 0.5 start_equipment_factor = 0.5"

            owner = FPR
          }
          create_unit = {
            division = "name = \"Peasant Army\" division_template = \"Peasant Army\" start_experience_factor = 0.5 start_equipment_factor = 0.5"

            owner = FPR
          }
      }
      random_owned_controlled_state = {
          limit = {
              c
              NOT = {id = 16 }
              is_on_continent = europe
          }
          FPR = {
              transfer_state = PREV
          }

          create_unit = {
            division = "name = \"Peasant Army\" division_template = \"Peasant Army\" start_experience_factor = 0.5 start_equipment_factor = 0.5"

            owner = FPR
          }
          create_unit = {
            division = "name = \"Peasant Army\" division_template = \"Peasant Army\" start_experience_factor = 0.5 start_equipment_factor = 0.5"

            owner = FPR
          }
      }
      declare_war_on = {
          target = FPR
          type = annex_everything
      }

 
  }
  else_if = {
      limit = {
          has_variable = FRA_peasent_revolt_var
      }
      set_country_flag = FRA_peasentrevolt_crushed_flag
  }
}

d_frarevolt = {
  FRA_peasent_revolt_effect = yes
}
